/**
 * CommandCanvas - Terminal Styles
 *
 * xterm.js overrides and terminal area styling.
 * Ensures the terminal fills its container and matches the dark theme.
 */

/* ============================================================
   Terminal Container
   ============================================================ */

#terminal-output {
  position: relative;
  /* Padding here instead of .xterm so FitAddon measures the correct content area */
  padding: var(--spacing-xs);
}

#terminal-output .xterm {
  width: 100%;
  height: 100%;
}

/* ============================================================
   xterm.js Viewport Overrides
   ============================================================ */

#terminal-output .xterm-viewport {
  overflow-y: auto;
}

/* ============================================================
   xterm.js Scrollbar Overrides
   ============================================================ */

#terminal-output .xterm-viewport::-webkit-scrollbar {
  width: 8px;
}

#terminal-output .xterm-viewport::-webkit-scrollbar-track {
  background: var(--color-bg);
}

#terminal-output .xterm-viewport::-webkit-scrollbar-thumb {
  background-color: var(--color-surface2);
  border-radius: var(--radius-sm);
  border: 2px solid var(--color-bg);
}

#terminal-output .xterm-viewport::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-overlay0);
}

/* ============================================================
   xterm.js Screen & Rows
   ============================================================ */

#terminal-output .xterm-screen {
  width: 100%;
  height: 100%;
}

/* Ensure xterm rows have proper line height */
#terminal-output .xterm-rows {
  line-height: normal;
}

/* ============================================================
   xterm.js Cursor
   ============================================================ */

#terminal-output .xterm-cursor-block {
  background-color: var(--color-rosewater, #f5e0dc);
}

#terminal-output .xterm-cursor-underline {
  border-bottom-color: var(--color-rosewater, #f5e0dc);
}

#terminal-output .xterm-cursor-bar {
  border-left-color: var(--color-rosewater, #f5e0dc);
}

/* ============================================================
   xterm.js Selection
   ============================================================ */

#terminal-output .xterm-selection div {
  background-color: var(--color-surface2, #585b70);
  opacity: 0.5;
}

/* ============================================================
   xterm.js Text Layer
   ============================================================ */

#terminal-output .xterm-char-measure-element {
  display: inline-block;
  visibility: hidden;
  position: absolute;
  top: 0;
  left: -9999em;
  line-height: normal;
}

/* ============================================================
   xterm.js Accessibility
   ============================================================ */

#terminal-output .xterm-accessibility {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
  z-index: 10;
  color: transparent;
}

#terminal-output .xterm-accessibility-tree {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}

/* ============================================================
   xterm.js Link Styles
   ============================================================ */

#terminal-output .xterm-underline {
  text-decoration: underline;
}

/* Links within the terminal */
#terminal-output .xterm-link {
  cursor: pointer;
}

#terminal-output .xterm-link:hover {
  text-decoration: underline;
}

/* ============================================================
   Terminal Focus Indicator
   ============================================================ */

#terminal-output:focus-within {
  outline: none;
}

/* Subtle focus border when terminal has focus */
#terminal-output:focus-within::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border: 1px solid var(--color-accent, #89b4fa);
  border-radius: 0;
  pointer-events: none;
  opacity: 0.3;
}
